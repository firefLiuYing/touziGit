# 开发日志
3/25  
----
今天做出了初级目标，其中遇到了很多问题：  
1.骰子被拖动时，会遮住装备的交互区，导致不能触发装备效果  
解决的办法，在交互区上挂了个脚本自己检测是否有鼠标在交互区内松开  
2.使用事件的时候，概率出现“value cannot be null”报错并且导致程序运行停止  
解决的办法，还没解决  
3.不同分辨率下，新生成的预制体UI组件，比如骰子和各个装备，会出现大小和排版不正常  
解决的办法，写了个脚本根据分辨率调整其scale和排版的deltaWidth，deltaHeight大小  

3/26   
----
今天完成了进阶目标，随便调整了readme的格式  
遇到的问题主要有：
1.给敌人设计骰子及装备时，发现敌人的骰子可以被玩家拖动当自己的骰子来用  
解决的办法，将敌人骰子和装备与玩家分开，分别设计，虽然感觉这种方法很低效率，但是目前也只能想到这个办法了  
2.敌人行动几乎在瞬间完成，玩家游戏体验很差，并且由于进行过快，敌人在行动前，他的行动结束代码就已经开始执行，导致行动被打断，实际上什么都没有做  
解决的办法，加入协程，让一个运行完了等零点几秒再进行下一步，敌人每次使用骰子时，也会有一点间隔，之后再摧毁骰子和下一次行动，方便玩家看清敌人具体使用了哪些骰子与装备  
感受：  
做的很不美观，并且有些地方比如敌人AI和终结技的重复行动效果虽然做出来了，但是感觉实现方法不甚完美，有些像是没有留后路，以后加新功能时有可能会被这次的实现方法所影响，从而导致工作量增加  
其他感受：  
感觉高级目标的背包与选装没什么头绪，生成随机地图也没什么头绪，并且有很强烈的预感明天做这些的时候会和我现在写的单次战斗起冲突......

3/27
----
今天星铁更新，做主线去了，没怎么干活。  
不过多少还是把装备选择功能做出来了，感觉没有想象的那么难，可能因为我做的是比较简易版的吧。  
主要遇到过如下问题：   
1.一些之前遇到过的，遮挡交互区，UI比例切换分辨率失调什么的老问题，不过有前两天积累的经验，很快就解决了。  
2.如何设计，使这个2x3的背包可以判断是否能装得下接下来要拖进去的这个物体  
思路：算是投机取巧了吧，因为看了一圈，所有装备全部宽度都只有一个单位长度，而高度要么为1，要么为2，所以我把背包的那个2x3的格子实际做的是3个2x1的竖条，每个独立作用，给他一个常量为最大容积，在给他一个初始为0的变量作为当前体积，每次加入新装备到背包，都会先判断当前体积加上将要进入的装备合起来是否会超过最大容积。感觉有点偷懒了，不过实现起来倒是挺简单。  
期待明天研究生成随机地图，生成随机地图感觉听起来就很牛逼，不知道实际做起来会是怎么样的，至少我这几天构思的时候产生的思路感觉都不太行的样子，不过明天正好试试看可不可行。

3/28
----
今天在试玩时在装备配选界面乱按一通，发现界面之前做的自动归位和背包是否已满判定都被玩坏了————如果我把一个装备从背包的一格拖到另一个背包格子里，就会让这个装备进入一种奇妙的状态，在这种状态下，他属于不在物品栏中，所以他不会自动回到物品栏，又不属于背包内，所以不会在背包中规矩的停在一个位置，但是还占用了背包位置，使无法在背包放入更多物体。经过试验和观察代码，最终发现原因在于松开鼠标时，没有考虑鼠标位置在背包内也要退出被选中状态，后经思考，把退出选中状态改在了装备上，保证无论在哪松开鼠标都可以退出被选中状态，最终解决问题。   
关于随机地图，已经有了一些初步的思路：初始在地图上构建一个起点，在Start函数里写一个复制自己的脚本，通过随机数控制朝哪个方向延申地图，但是出现了一个问题，就是延申的方向可能已经有了地图块，这个问题还没想清楚应该怎么办，我初步认为可以搞一个全局二维bool数组来记录每个位置是否被占用，但是觉得这个办法不知道为什么有一种让我觉得太蠢了的感觉，所以打算实在想不到别的办法了再尝试实现这个办法，虽然说这个办法能不能真的有用都不知道......      
正准备提交突然发现之前的日期都标错了，27，28都写成17，18了......









